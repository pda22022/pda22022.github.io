<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Τίτλος Εργασίας</title>
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>

  <script>
    AFRAME.registerComponent('testing', {
      init: function () {
        this.el.addEventListener('click', e => {
          this.el.setAttribute('animation-mixer', { timeScale: 1 });
        });
      }
    });
  </script>

  <style>
    body {
      margin: 0;
      font-family: sans-serif;
    }

    h1, h3 {
      text-align: center;
    }

    a-scene {
      width: 100vw;
      height: 100vh;
      display: block;
      border: none;
    }
  </style>
</head>

<body>
  <h1>ΤΙΤΛΟΣ ΕΡΓΑΣΙΑΣ</h1>
  <h3>Ονοματεπώνυμο</h3>
  <hr />
  <p><strong>Σενάριο:</strong>...</p>
  <hr />

  <div align="center">
    <a-scene cursor="rayOrigin: mouse" background="color:PowderBlue" ondblclick="this.requestFullscreen();" embedded>

      <a-camera>
        <a-cursor fuse="true" fuse-timeout="5000"></a-cursor>
      </a-camera>

      <a-sphere radius="500" position="0 5000 0" material="fog: false"></a-sphere>

      <a-entity position="0 250 0" light="type: directional; intensity: 0.5; castShadow: true;
          shadowCameraBottom: -500; shadowCameraTop: 500;
          shadowCameraLeft: -500; shadowCameraRight: 500">
      </a-entity>

      <a-light type="ambient" intensity="0.25"></a-light>

      <a-plane color="PaleGoldenrod" static-body height="1000" width="1000" rotation="-90 0 0"></a-plane>

      <!-- Διορθωμένο tag assets -->
      <a-assets>
        <a-asset-item id="bank" src="old_western_bank_with_interior_low_poly.glb"></a-asset-item>
        <a-asset-item id="watertower" src="low_poly_western_watertower.glb"></a-asset-item>
        <a-asset-item id="church" src="western_church_-_mobile_gameready.glb"></a-asset-item>
        <a-asset-item id="tree" src="tree.glb"></a-asset-item>
      </a-assets>

      <!-- Κτίρια με δυνατότητα animation -->
      <a-entity gltf-model="#bank" scale="2 2 2" position="-1 -0.4 -20" animation-mixer></a-entity>
      <a-entity gltf-model="#watertower" scale="2 3 2" position="25 57 -20" animation-mixer></a-entity>
      <a-entity gltf-model="#church" scale="2 2 2" position="-60 1.1 20" rotation="0 -180 0"
                animation-mixer testing></a-entity>

    </a-scene>
  </div>

  <!-- Script για 10 δέντρα -->
  <script>
    var scene1 = document.querySelector('a-scene');
    for (var i = 0; i < 10; i++) {
      var tree = document.createElement('a-entity');
      var x = Math.random() * 80 - 40;
      var z = Math.random() * 80 - 40;
      var s = 0.1;
      var r = Math.random() * 180 - 90;

      tree.setAttribute('gltf-model', '#tree');
      tree.setAttribute('position', x + ' 0 ' + z);
      tree.setAttribute('scale', s + ' ' + s + ' ' + s);
      tree.setAttribute('rotation', '0 ' + r + ' 0');
      tree.setAttribute('shadow', 'receive: false');

      scene1.appendChild(tree);
    }
  </script>

  <hr />
  <p><strong>Οδηγίες:</strong> Κάνε διπλό κλικ στη σκηνή για πλήρη οθόνη. Κάνε κλικ σε κτίριο για να ξεκινήσει animation.</p>
  <hr />
  <p><strong>Credits:</strong> Τα μοντέλα είναι από το Sketchfab / Poly Pizza κ.λπ.</p>
</body>
</html>
